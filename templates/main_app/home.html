{% extends "base.html" %}

{% block title %}Главная - Design.pro{% endblock %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}
{% block content %}
    <section class="about">
        <h2>О нас</h2>
        <p>
            Design.pro — это команда талантливых дизайнеров интерьеров, объединённых страстью к созданию
            красивых, функциональных и уникальных пространств. Мы работаем с частными клиентами и коммерческими
            проектами, помогая воплотить самые смелые идеи в жизнь.
        </p>
        <p>
            Наша миссия — сделать процесс проектирования интерьера максимально комфортным и прозрачным.
            Мы ценим индивидуальность каждого клиента и создаём дизайн, который отражает его стиль и потребности.
        </p>
    </section>
    <section class="service">
        <h2>Наши услуги</h2>
        <ul>
            <div>
                <li>Разработка 2D и 3D проектов интерьеров</li>
                <li>Подбор мебели, отделочных материалов и декора</li>
            </div>
            <div>
                <li>Авторский надзор за реализацией проекта</li>
                <li>Консультации по дизайну и планировке</li>
            </div>
        </ul>
    </section>
    <div>
        <h1>Добро пожаловать в Design.pro!</h1>
        <p>Создайте заявку на дизайн интерьера или просмотрите выполненные работы.</p>
    </div>
    <h2>Последние выполненные работы:</h2>
    {% if completed_requests %}
        <div class="completed-requests">
            {% for req in completed_requests %}
                <div class="request-item-image">
                    {% if req.design_image %}
                        <img src="{{ req.design_image.url }}" alt="Дизайн {{ req.title }}"
                             style="max-width: 200px; height: auto;">
                    {% else %}
                        <p>Изображение дизайна отсутствует.</p>
                    {% endif %}
                </div>
                <div class="request-item">
                    <div class="request-item-text">
                        <h3>{{ req.title }}</h3>
                        <p>Категория: {{ req.category.name }}</p>
                        <p>Дата: {{ req.created_at|date:"d.m.Y H:i" }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Выполненных работ пока нет.</p>
    {% endif %}

    <h2>Заявок в работе: {{ in_progress_count }}</h2>

    {% if user.is_authenticated %}
        {% if user.is_staff %}
            <div class="link">
                <p><a href="{% url 'admin_dashboard' %}">Перейти в админ-панель</a></p>
                <p><a href="{% url 'manage_categories' %}">Управление категориями</a></p>
            </div>

        {% else %}
            <div class="link">
                <p><a href="{% url 'user_dashboard' %}">Перейти в ваш личный кабинет</a></p>
                <p><a href="{% url 'create_request' %}">Создать новую заявку</a></p>
            </div>

        {% endif %}
    {% else %}
        <div class="link">
            <p><a href="{% url 'login' %}">Войдите</a>, чтобы создать заявку или посмотреть свои.</p>
            <p><a href="{% url 'register' %}">Зарегистрируйтесь</a>, если у вас ещё нет аккаунта.</p>
        </div>

    {% endif %}

{% endblock %}